"use strict";(self.webpackChunke_commer_react=self.webpackChunke_commer_react||[]).push([[846],{846:(e,s,a)=>{a.r(s),a.d(s,{default:()=>c});var i=a(43),t=a(453),l=a(579);function r(e){let{users:s,onEditUser:a,onDeleteUser:t,adminEmails:r}=e;const[n,c]=(0,i.useState)(""),[d,o]=(0,i.useState)("all"),m=s.filter(e=>{var s,a;const i=(null===(s=e.name)||void 0===s?void 0:s.toLowerCase().includes(n.toLowerCase()))||(null===(a=e.email)||void 0===a?void 0:a.toLowerCase().includes(n.toLowerCase()));return"all"===d?i:"admin"===d?i&&r.includes(e.email):"regular"===d?i&&!r.includes(e.email):i});return(0,l.jsxs)("div",{className:"users-list-container",children:[(0,l.jsxs)("div",{className:"users-list-header",children:[(0,l.jsx)("h2",{className:"users-list-title",children:"Users Management"}),(0,l.jsxs)("div",{className:"users-list-controls",children:[(0,l.jsx)("input",{type:"text",placeholder:"Search users...",className:"users-search",value:n,onChange:e=>c(e.target.value)}),(0,l.jsxs)("select",{className:"users-filter",value:d,onChange:e=>o(e.target.value),children:[(0,l.jsx)("option",{value:"all",children:"All Users"}),(0,l.jsx)("option",{value:"admin",children:"Admins Only"}),(0,l.jsx)("option",{value:"regular",children:"Regular Users"})]})]})]}),(0,l.jsx)("div",{className:"table-responsive",children:(0,l.jsxs)("table",{className:"users-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Name"}),(0,l.jsx)("th",{children:"Email"}),(0,l.jsx)("th",{children:"Status"}),(0,l.jsx)("th",{children:"Joined Date"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:m.map(e=>{return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.name||"N/A"}),(0,l.jsx)("td",{children:e.email}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{className:"user-status "+(r.includes(e.email)?"admin":"regular"),children:r.includes(e.email)?"Admin":"User"})}),(0,l.jsx)("td",{children:(s=e.joinDate,s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A")}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"user-actions",children:[(0,l.jsx)("button",{className:"user-action-btn edit",onClick:()=>a(e),children:"Edit"}),!r.includes(e.email)&&(0,l.jsx)("button",{className:"user-action-btn delete",onClick:()=>t(e),children:"Delete"})]})})]},e.email);var s})})]})})]})}function n(e){let{users:s,adminEmails:a}=e;const i=s.length,t=s.filter(e=>a.includes(e.email)).length,r=i-t;return(0,l.jsxs)("div",{className:"users-summary-container",children:[(0,l.jsx)("h3",{className:"summary-title",children:"User Statistics"}),(0,l.jsxs)("div",{className:"summary-grid",children:[(0,l.jsxs)("div",{className:"summary-card total",children:[(0,l.jsxs)("div",{className:"card-content",children:[(0,l.jsx)("span",{className:"card-value",children:i}),(0,l.jsx)("span",{className:"card-label",children:"Total Users"})]}),(0,l.jsx)("div",{className:"card-icon",children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,l.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,l.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,l.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),(0,l.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})})]}),(0,l.jsxs)("div",{className:"summary-card admins",children:[(0,l.jsxs)("div",{className:"card-content",children:[(0,l.jsx)("span",{className:"card-value",children:t}),(0,l.jsx)("span",{className:"card-label",children:"Admins"})]}),(0,l.jsx)("div",{className:"card-icon",children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,l.jsx)("path",{d:"M20 7h-8v12h8V7zM4 7h8v12H4z"}),(0,l.jsx)("rect",{x:"4",y:"7",width:"16",height:"12"}),(0,l.jsx)("circle",{cx:"12",cy:"11",r:"1"}),(0,l.jsx)("path",{d:"M12 12v3"})]})})]}),(0,l.jsxs)("div",{className:"summary-card users",children:[(0,l.jsxs)("div",{className:"card-content",children:[(0,l.jsx)("span",{className:"card-value",children:r}),(0,l.jsx)("span",{className:"card-label",children:"Regular Users"})]}),(0,l.jsx)("div",{className:"card-icon",children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,l.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,l.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})})]})]})]})}function c(e){let{darkMode:s=!0}=e;const[a,c]=(0,i.useState)([]),[d,o]=(0,i.useState)([]),[m,h]=(0,i.useState)("users"),[u,x]=(0,i.useState)(!0),[j,g]=(0,i.useState)(!0),[p,N]=(0,i.useState)(null),[v,y]=(0,i.useState)(!1),[f,b]=(0,i.useState)(!1),[S,w]=(0,i.useState)({email:"",password:"",name:""}),[A,O]=(0,i.useState)(""),[C,k]=(0,i.useState)(""),I=(0,i.useCallback)(()=>{const e=JSON.parse(localStorage.getItem("admin_emails")||"[]"),s=e.length>0?e:["yahiapro400@gmail.com","yahiacool2009@gmail.com"],a=localStorage.getItem("currentUserEmail");if(a&&s.includes(a)){t.A.getUsers().some(e=>e.email===a)?(y(!0),console.log("Authorization granted")):(P(),setTimeout(()=>{y(!0),console.log("Authorization granted after adding user")},500))}else console.log("User not in admin list, authorization denied"),y(!1)},[]),U=(0,i.useCallback)(()=>{x(!0);const e=t.A.getUsers(),s=t.A.getOrders(),a=[{email:"yahiapro400@gmail.com",password:"yahia2024",name:"Yahia Pro"},{email:"yahiacool2009@gmail.com",password:"yahia2009",name:"Yahia Cool"}];a.forEach(s=>{if(!e.find(e=>e.email===s.email))try{t.A.registerUser({email:s.email,password:s.password,name:s.name}),console.log(`Added protected admin: ${s.email}`)}catch(a){console.log(`Protected admin ${s.email} already exists or error occurred:`,a.message)}});const i=JSON.parse(localStorage.getItem("admin_emails")||"[]");a.forEach(e=>{i.includes(e.email)||i.push(e.email)}),localStorage.setItem("admin_emails",JSON.stringify(i));const l=t.A.getUsers(),r=JSON.parse(localStorage.getItem("admin_emails")||"[]"),n=r.length>0?r:["yahiapro400@gmail.com","yahiacool2009@gmail.com"],d=l.filter(e=>n.includes(e.email));c(j?l:d),o(s),N(t.A.getLastSaveTime()),x(!1)},[j]);(0,i.useEffect)(()=>{(()=>{const e=t.A.getUsers(),s=JSON.parse(localStorage.getItem("admin_emails")||"[]");[{email:"yahiapro400@gmail.com",password:"yahia2024",name:"Yahia Pro"},{email:"yahiacool2009@gmail.com",password:"yahia2009",name:"Yahia Cool"}].forEach(a=>{if(!e.find(e=>e.email===a.email))try{t.A.registerUser({email:a.email,password:a.password,name:a.name}),console.log(`Initialized protected admin: ${a.email}`)}catch(i){console.log(`Protected admin ${a.email} already exists:`,i.message)}s.includes(a.email)||s.push(a.email)}),localStorage.setItem("admin_emails",JSON.stringify(s))})(),setTimeout(()=>{I()},100),U()},[I,U]),(0,i.useEffect)(()=>{v&&U()},[j,v,U]);const E=e=>{const s=a.find(s=>s.id===e);if(!s)return void alert("User not found!");const i=["yahiapro400@gmail.com","yahiacool2009@gmail.com"],l=localStorage.getItem("currentUserEmail");if(i.includes(s.email))return void alert("\u274c Cannot delete protected admin accounts!\n\nOnly yahiapro400@gmail.com and yahiacool2009@gmail.com can delete protected admins.");if(!JSON.parse(localStorage.getItem("admin_emails")||"[]").includes(s.email)||i.includes(l)){if(window.confirm(`Are you sure you want to delete user: ${s.email}?`)){t.A.deleteUser(e)?(alert(`\u2705 User ${s.email} has been deleted successfully!`),U()):alert("\u274c Failed to delete user. Please try again.")}}else alert("\u274c Only protected admins can delete other admin accounts!\n\nContact yahiapro400@gmail.com or yahiacool2009@gmail.com to delete admin accounts.")},D=e=>{const s=JSON.parse(localStorage.getItem("order_notifications")||"[]"),a={id:Date.now(),type:"rejection",message:`Your order #${e.orderNumber} has been rejected.`,date:(new Date).toISOString(),userEmail:e.userEmail,read:!1};s.push(a),localStorage.setItem("order_notifications",JSON.stringify(s))},_=e=>{const s=JSON.parse(localStorage.getItem("order_notifications")||"[]"),a={id:Date.now(),type:"deletion",message:`Your order #${e.orderNumber} has been deleted.`,date:(new Date).toISOString(),userEmail:e.userEmail,read:!1};s.push(a),localStorage.setItem("order_notifications",JSON.stringify(s))},J=e=>{try{const s=JSON.parse(localStorage.getItem("ecommerce_products")||"[]");e.items.forEach(e=>{const a=s.findIndex(s=>s.id===e.id);-1!==a&&(s[a].quantity+=e.quantity)}),localStorage.setItem("ecommerce_products",JSON.stringify(s)),console.log("Product quantities restored after order deletion")}catch(s){console.error("Error restoring product quantities:",s)}},P=()=>{try{const e=[{email:"yahiapro400@gmail.com",password:"yahia2024",name:"Yahia Pro"},{email:"yahiacool2009@gmail.com",password:"yahia2009",name:"Yahia Cool"}],s=JSON.parse(localStorage.getItem("ecommerce_users")||"[]"),a=JSON.parse(localStorage.getItem("admin_emails")||"[]");let i=0;e.forEach(e=>{if(s.find(s=>s.email===e.email))a.includes(e.email)||(a.push(e.email),i++);else{const t={id:Date.now()+Math.random(),email:e.email,password:e.password,name:e.name,createdAt:(new Date).toISOString(),orders:[]};s.push(t),i++,a.includes(e.email)||a.push(e.email)}}),localStorage.setItem("ecommerce_users",JSON.stringify(s)),localStorage.setItem("admin_emails",JSON.stringify(a)),i>0?alert(`\u2705 Added ${i} protected admin(s) successfully!`):alert("\u2139\ufe0f Protected admins already exist.")}catch(e){alert("Error adding protected admins: "+e.message)}},M=()=>{if(window.confirm("\ud83d\udd27 Fix login issues?\n\nThis will:\n\u2022 Reset protected admin accounts\n\u2022 Ensure correct passwords\n\u2022 Fix any corrupted data\n\nContinue?"))try{t.A.resetProtectedAdmins()?(alert("\u2705 Login issues fixed successfully!\n\nYou can now login with:\n\u2022 yahiapro400@gmail.com / yahia2024\n\u2022 yahiacool2009@gmail.com / yahia2009"),U()):alert("\u274c Failed to fix login issues. Please try again.")}catch(e){alert("\u274c Error fixing login issues: "+e.message)}},$=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return v?u?(0,l.jsx)("div",{className:"admin-container "+(s?"dark-mode":""),children:(0,l.jsxs)("div",{className:"loading",children:[(0,l.jsx)("div",{className:"spinner"}),(0,l.jsx)("p",{children:"Loading data..."})]})}):(0,l.jsxs)("div",{className:"admin-container "+(s?"dark-mode":""),children:[(0,l.jsxs)("div",{className:"admin-header",children:[(0,l.jsx)("h1",{children:"Admin Dashboard"}),(0,l.jsx)("p",{children:"Welcome back, Admin! Manage your e-commerce platform."}),(0,l.jsxs)("div",{className:"admin-stats",children:[(0,l.jsxs)("div",{className:"stat-card",children:[(0,l.jsx)("span",{className:"stat-icon",children:"\ud83d\udc64"}),(0,l.jsx)("h3",{children:a.length}),(0,l.jsx)("p",{children:"Total Users"})]}),(0,l.jsxs)("div",{className:"stat-card",children:[(0,l.jsx)("span",{className:"stat-icon",children:"\ud83d\uded2"}),(0,l.jsx)("h3",{children:d.length}),(0,l.jsx)("p",{children:"Total Orders"})]}),(0,l.jsxs)("div",{className:"stat-card",children:[(0,l.jsx)("span",{className:"stat-icon",children:"\ud83d\udee1\ufe0f"}),(0,l.jsx)("h3",{children:a.filter(e=>["yahiapro400@gmail.com","yahiacool2009@gmail.com"].includes(e.email)).length}),(0,l.jsx)("p",{children:"Protected Admins"})]})]})]}),(0,l.jsxs)("div",{className:"admin-tabs",children:[(0,l.jsx)("button",{className:"tab-btn "+("users"===m?"active":""),onClick:()=>h("users"),children:"Users Management"}),(0,l.jsx)("button",{className:"tab-btn "+("orders"===m?"active":""),onClick:()=>h("orders"),children:"Orders Management"}),(0,l.jsx)("button",{className:"tab-btn "+("manage-admins"===m?"active":""),onClick:()=>h("manage-admins"),children:"Manage Admins"}),(0,l.jsx)("button",{className:"tab-btn "+("stats"===m?"active":""),onClick:()=>h("stats"),children:"\ud83d\udcca Advanced Stats"}),(0,l.jsx)("button",{className:"tab-btn "+("analytics"===m?"active":""),onClick:()=>h("analytics"),children:"\ud83d\udcc8 Analytics"})]}),(0,l.jsxs)("div",{className:"admin-content",children:["users"===m&&(0,l.jsxs)("div",{className:"users-section",children:[(0,l.jsx)(n,{users:a,adminEmails:JSON.parse(localStorage.getItem("admin_emails")||"[]")}),(0,l.jsx)(r,{users:a,onEditUser:e=>{const s=["yahiapro400@gmail.com","yahiacool2009@gmail.com"],a=localStorage.getItem("currentUserEmail");!s.includes(e.email)||s.includes(a)||alert("\u274c Only protected admins can edit admin accounts!\n\nContact yahiapro400@gmail.com or yahiacool2009@gmail.com for changes.")},onDeleteUser:e=>{var s;const i=e.id||(null===(s=a.find(s=>s.email===e.email))||void 0===s?void 0:s.id);i?E(i):alert("Could not find user ID")},adminEmails:JSON.parse(localStorage.getItem("admin_emails")||"[]")}),0===a.length?(0,l.jsx)("div",{className:"no-data",children:(0,l.jsx)("p",{children:"No users found"})}):(0,l.jsxs)("div",{className:"users-list",children:[(0,l.jsxs)("div",{className:"users-summary",children:[(0,l.jsx)("h3",{children:"\ud83d\udcca Users Summary"}),(0,l.jsxs)("p",{children:["Total Users: ",(0,l.jsx)("strong",{children:a.length})]}),(0,l.jsxs)("p",{children:["Protected Admins: ",(0,l.jsx)("strong",{children:a.filter(e=>["yahiapro400@gmail.com","yahiacool2009@gmail.com"].includes(e.email)).length})]}),(0,l.jsxs)("p",{children:["Regular Users: ",(0,l.jsx)("strong",{children:a.filter(e=>!["yahiapro400@gmail.com","yahiacool2009@gmail.com"].includes(e.email)).length})]})]}),a.map((e,s)=>{var a;const i=["yahiapro400@gmail.com","yahiacool2009@gmail.com"].includes(e.email),t=JSON.parse(localStorage.getItem("admin_emails")||"[]").includes(e.email);return(0,l.jsxs)("div",{className:`user-card ${i?"protected":""} ${t?"admin":"regular"}`,children:[(0,l.jsxs)("div",{className:"user-info",children:[(0,l.jsx)("div",{className:"user-header",children:(0,l.jsxs)("h3",{children:["#",s+1," - ",e.name,i&&(0,l.jsx)("span",{className:"protected-badge",children:"\ud83d\udee1\ufe0f Protected Admin"}),t&&!i&&(0,l.jsx)("span",{className:"admin-badge",children:"\ud83d\udc51 Admin"}),!t&&(0,l.jsx)("span",{className:"user-badge",children:"\ud83d\udc64 User"})]})}),(0,l.jsxs)("p",{className:"user-email",children:[(0,l.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,l.jsxs)("p",{className:"user-date",children:[(0,l.jsx)("strong",{children:"Registration Date:"})," ",$(e.createdAt)]}),(0,l.jsxs)("p",{className:"user-orders",children:[(0,l.jsx)("strong",{children:"Number of Orders:"})," ",(null===(a=e.orders)||void 0===a?void 0:a.length)||0]}),(0,l.jsxs)("p",{className:"user-id",children:[(0,l.jsx)("strong",{children:"User ID:"})," ",e.id]}),e.password&&(0,l.jsxs)("p",{className:"user-password",children:[(0,l.jsx)("strong",{children:"Password:"})," ",e.password]})]}),(0,l.jsxs)("div",{className:"user-actions",children:[!i&&(0,l.jsx)("button",{className:"delete-btn",onClick:()=>E(e.id),children:"Delete"}),i&&(0,l.jsx)("span",{className:"protected-message",children:"Protected Admin - Cannot Delete"})]})]},e.id)})]})]}),"orders"===m&&(0,l.jsxs)("div",{className:"orders-section",children:[(0,l.jsxs)("div",{className:"section-header",children:[(0,l.jsx)("h2",{children:"Orders Management"}),(0,l.jsx)("button",{className:"refresh-btn",onClick:U,children:"Refresh Data"})]}),0===d.length?(0,l.jsx)("div",{className:"no-data",children:(0,l.jsx)("p",{children:"No orders found"})}):(0,l.jsx)("div",{className:"orders-list",children:d.map(e=>(0,l.jsxs)("div",{className:"order-card",children:[(0,l.jsxs)("div",{className:"order-info",children:[(0,l.jsxs)("h3",{children:["Order #",e.orderNumber]}),(0,l.jsx)("p",{className:"order-email font-weight-bold",children:e.userEmail}),(0,l.jsxs)("p",{className:"order-date font-weight-bold",children:["Order Date: ",$(e.date)]}),(0,l.jsxs)("p",{className:"order-status font-weight-bold",children:["Status: ",e.status]}),(0,l.jsxs)("p",{className:"order-total font-weight-bold",children:["Total: $",e.total.toFixed(2)]}),(0,l.jsxs)("p",{className:"order-items font-weight-bold",children:["Number of Items: ",e.items.length]}),e.shipping&&Object.keys(e.shipping).length>0&&(0,l.jsxs)("div",{className:"shipping-info",children:[(0,l.jsx)("h4",{children:"Shipping Details:"}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Name:"})," ",e.shipping.fullName]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Phone:"})," ",e.shipping.phone]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Address:"})," ",e.shipping.street,", ",e.shipping.building]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Address Inside Country:"})," ",e.shipping.addressInCountry]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"City:"})," ",e.shipping.city,", ",e.shipping.governorate]}),e.shipping.additionalInfo&&(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Notes:"})," ",e.shipping.additionalInfo]})]})]}),(0,l.jsx)("div",{className:"order-items",children:e.items.map((e,s)=>(0,l.jsxs)("div",{className:"order-item",children:[(0,l.jsx)("div",{className:"item-image",children:(0,l.jsx)("img",{src:e.image,alt:e.name})}),(0,l.jsxs)("div",{className:"item-details",children:[(0,l.jsx)("h4",{children:e.name}),(0,l.jsxs)("p",{className:"item-price",children:["$",e.price]}),(0,l.jsxs)("p",{className:"item-quantity",children:["Quantity Sold: ",e.quantity]}),(0,l.jsxs)("p",{className:"item-total",children:["Total: $",(e.price*e.quantity).toFixed(2)]})]})]},s))}),(0,l.jsxs)("div",{className:"order-actions",children:["rejected"!==e.status&&"approved"!==e.status&&(0,l.jsx)("button",{className:"reject-btn",onClick:()=>(e=>{const s=d.find(s=>s.id===e);if(!s)return;const a=d.map(s=>s.id===e?{...s,status:"rejected"}:s);o(a),localStorage.setItem("ecommerce_orders",JSON.stringify(a)),D(s),alert(`Order #${s.orderNumber} has been rejected.`)})(e.id),children:"Reject Order"}),"rejected"===e.status&&(0,l.jsxs)("div",{className:"order-actions",children:[(0,l.jsx)("span",{className:"rejected-status",children:"Rejected"}),(0,l.jsx)("button",{className:"approve-btn",onClick:()=>(e=>{const s=d.map(s=>s.id===e?{...s,status:"approved"}:s);o(s),localStorage.setItem("ecommerce_orders",JSON.stringify(s)),alert("Order has been approved.")})(e.id),children:"Re-activate"})]}),"approved"===e.status&&(0,l.jsx)("span",{className:"approved-status",children:"Approved"}),(0,l.jsx)("button",{className:"delete-order-btn",onClick:()=>(e=>{const s=d.find(s=>s.id===e);if(s&&window.confirm(`Are you sure you want to delete order #${s.orderNumber}?`)){const a=d.filter(s=>s.id!==e);o(a),localStorage.setItem("ecommerce_orders",JSON.stringify(a)),_(s),J(s),alert(`Order #${s.orderNumber} has been deleted.`)}})(e.id),children:"Delete Order"})]})]},e.id))})]}),"stats"===m&&(0,l.jsxs)("div",{className:"stats-section",children:[(0,l.jsxs)("div",{className:"section-header",children:[(0,l.jsx)("h2",{children:"\ud83d\udcca Advanced Statistics"}),(0,l.jsx)("button",{className:"refresh-btn",onClick:U,children:"Refresh Stats"})]}),(0,l.jsxs)("div",{className:"stats-grid",children:[(0,l.jsxs)("div",{className:"stats-card",children:[(0,l.jsx)("h3",{children:"\ud83d\udcc8 Revenue Analytics"}),(0,l.jsxs)("div",{className:"revenue-stats",children:[(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{className:"stat-label",children:"Total Revenue"}),(0,l.jsxs)("span",{className:"stat-value",children:["$",d.reduce((e,s)=>e+s.total,0).toFixed(2)]})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{className:"stat-label",children:"Average Order Value"}),(0,l.jsxs)("span",{className:"stat-value",children:["$",d.length>0?(d.reduce((e,s)=>e+s.total,0)/d.length).toFixed(2):"0.00"]})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{className:"stat-label",children:"Orders This Month"}),(0,l.jsx)("span",{className:"stat-value",children:d.filter(e=>{const s=new Date(e.date),a=new Date;return s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear()}).length})]})]})]}),(0,l.jsxs)("div",{className:"stats-card",children:[(0,l.jsx)("h3",{children:"\ud83d\udc65 User Analytics"}),(0,l.jsxs)("div",{className:"user-stats",children:[(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{className:"stat-label",children:"Total Users"}),(0,l.jsx)("span",{className:"stat-value",children:a.length})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{className:"stat-label",children:"Active Users"}),(0,l.jsx)("span",{className:"stat-value",children:a.filter(e=>e.orders&&e.orders.length>0).length})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{className:"stat-label",children:"New Users This Month"}),(0,l.jsx)("span",{className:"stat-value",children:a.filter(e=>{const s=new Date(e.createdAt),a=new Date;return s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear()}).length})]})]})]}),(0,l.jsxs)("div",{className:"stats-card",children:[(0,l.jsx)("h3",{children:"\ud83d\uded2 Order Status"}),(0,l.jsxs)("div",{className:"order-status-stats",children:[(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{className:"stat-label",children:"Pending Orders"}),(0,l.jsx)("span",{className:"stat-value",children:d.filter(e=>"pending"===e.status).length})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{className:"stat-label",children:"Approved Orders"}),(0,l.jsx)("span",{className:"stat-value",children:d.filter(e=>"approved"===e.status).length})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{className:"stat-label",children:"Rejected Orders"}),(0,l.jsx)("span",{className:"stat-value",children:d.filter(e=>"rejected"===e.status).length})]})]})]})]})]}),"manage-admins"===m&&(0,l.jsxs)("div",{className:"manage-admins-section",children:[(0,l.jsxs)("div",{className:"section-header",children:[(0,l.jsx)("h2",{children:"\ud83d\udc65 Manage Admins"}),(0,l.jsx)("button",{className:"refresh-btn",onClick:U,children:"Refresh Data"})]}),(0,l.jsxs)("div",{className:"add-admin-form",children:[(0,l.jsx)("h3",{children:"Add New Admin"}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"adminEmail",children:"Admin Email:"}),(0,l.jsx)("input",{type:"email",id:"adminEmail",className:"admin-input",placeholder:"Enter admin email",value:S.email,onChange:e=>w({...S,email:e.target.value})})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"adminPassword",children:"Password:"}),(0,l.jsx)("input",{type:"password",id:"adminPassword",className:"admin-input",placeholder:"Enter password",value:S.password,onChange:e=>w({...S,password:e.target.value})})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"adminName",children:"Name:"}),(0,l.jsx)("input",{type:"text",id:"adminName",className:"admin-input",placeholder:"Enter admin name",value:S.name,onChange:e=>w({...S,name:e.target.value})})]}),(0,l.jsx)("button",{className:"add-admin-btn",onClick:()=>{if(S.email&&S.password&&S.name)try{t.A.registerUser(S);const e=JSON.parse(localStorage.getItem("admin_emails")||"[]");e.includes(S.email)||(e.push(S.email),localStorage.setItem("admin_emails",JSON.stringify(e))),w({email:"",password:"",name:""}),alert("Admin added successfully!"),U()}catch(e){alert("Error adding admin: "+e.message)}else alert("Please fill all fields")},children:"Add Admin"}),A&&(0,l.jsx)("div",{className:"admin-message error",children:A})]}),(0,l.jsxs)("div",{className:"current-admins",children:[(0,l.jsx)("h3",{children:"Current Admins"}),(0,l.jsx)("div",{className:"admins-list",children:(()=>{const e=JSON.parse(localStorage.getItem("admin_emails")||"[]");return(e.length>0?e:["yahiapro400@gmail.com","yahiacool2009@gmail.com"]).map((e,s)=>(0,l.jsxs)("div",{className:"admin-item",children:[(0,l.jsx)("span",{className:"admin-email",children:e}),(0,l.jsx)("span",{className:"admin-status",children:"Active"})]},s))})()})]})]}),"analytics"===m&&(0,l.jsxs)("div",{className:"analytics-section",children:[(0,l.jsxs)("div",{className:"section-header",children:[(0,l.jsx)("h2",{children:"\ud83d\udcc8 Real-time Analytics"}),(0,l.jsx)("button",{className:"refresh-btn",onClick:U,children:"Update Analytics"})]}),(0,l.jsxs)("div",{className:"analytics-grid",children:[(0,l.jsxs)("div",{className:"analytics-card",children:[(0,l.jsx)("h3",{children:"\ud83d\udd25 Top Performing Products"}),(0,l.jsx)("div",{className:"top-products",children:(()=>{const e={};d.forEach(s=>{s.items.forEach(s=>{e[s.name]||(e[s.name]={quantity:0,revenue:0}),e[s.name].quantity+=s.quantity,e[s.name].revenue+=s.price*s.quantity})});return Object.entries(e).sort((e,s)=>{let[,a]=e,[,i]=s;return i.revenue-a.revenue}).slice(0,5).map((e,s)=>{let[a,i]=e;return(0,l.jsxs)("div",{className:"product-stat",children:[(0,l.jsxs)("span",{className:"rank",children:["#",s+1]}),(0,l.jsx)("span",{className:"name",children:a}),(0,l.jsxs)("span",{className:"quantity",children:["Sold: ",i.quantity]}),(0,l.jsxs)("span",{className:"revenue",children:["$",i.revenue.toFixed(2)]})]},a)})})()})]}),(0,l.jsxs)("div",{className:"analytics-card",children:[(0,l.jsx)("h3",{children:"\ud83d\udcc5 Recent Activity"}),(0,l.jsx)("div",{className:"recent-activity",children:d.slice(0,5).map(e=>{return(0,l.jsxs)("div",{className:"activity-item",children:[(0,l.jsx)("span",{className:"activity-icon",children:"\ud83d\uded2"}),(0,l.jsxs)("span",{className:"activity-text",children:["Order #",e.orderNumber," - $",e.total.toFixed(2)]}),(0,l.jsx)("span",{className:"activity-time",children:(s=e.date,new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]},e.id);var s})})]}),(0,l.jsxs)("div",{className:"analytics-card",children:[(0,l.jsx)("h3",{children:"\ud83c\udfaf Quick Actions"}),(0,l.jsxs)("div",{className:"quick-actions",children:[(0,l.jsx)("button",{className:"quick-action-btn",onClick:()=>h("users"),children:"\ud83d\udc65 Manage Users"}),(0,l.jsx)("button",{className:"quick-action-btn",onClick:()=>h("orders"),children:"\ud83d\udce6 View Orders"}),(0,l.jsx)("button",{className:"quick-action-btn",onClick:()=>{window.confirm("Are you sure you want to clear all data? This action cannot be undone!")&&(t.A.clearDatabase(),c([]),o([]),alert("All data has been cleared."))},children:"\ud83d\uddd1\ufe0f Clear Database"}),(0,l.jsx)("button",{className:"quick-action-btn",onClick:P,children:"\ud83d\udee1\ufe0f Add Protected Admins"})]})]})]})]})]})]}):(0,l.jsx)("div",{className:"admin-container "+(s?"dark-mode":""),children:(0,l.jsx)("div",{className:"unauthorized",children:(0,l.jsxs)("div",{className:"unauthorized-content",children:[(0,l.jsx)("h1",{children:"Access Denied"}),(0,l.jsx)("p",{children:"You are not authorized to access the admin dashboard."}),(0,l.jsx)("p",{children:"Only authorized admin accounts can access this page."}),(0,l.jsxs)("div",{className:"unauthorized-info",children:[(0,l.jsx)("h3",{children:"Authorized Admin Accounts:"}),(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:"yahiapro400@gmail.com"}),(0,l.jsx)("li",{children:"yahiacool2009@gmail.com"})]})]}),(0,l.jsxs)("div",{className:"unauthorized-actions",children:[(0,l.jsx)("button",{className:"add-protected-admins-btn",onClick:()=>{P(),setTimeout(()=>{I()},1e3)},children:"Add Protected Admins"}),(0,l.jsx)("button",{className:"fix-login-btn",onClick:M,children:"\ud83d\udd27 Fix Login Issues"}),(0,l.jsx)("button",{className:"fix-access-btn",onClick:()=>{const e=localStorage.getItem("currentUserEmail");if(e){const s=JSON.parse(localStorage.getItem("admin_emails")||"[]");s.includes(e)||(s.push(e),localStorage.setItem("admin_emails",JSON.stringify(s)));t.A.getUsers().some(s=>s.email===e)||t.A.registerUser({email:e,password:"admin123",name:e.split("@")[0]}),setTimeout(()=>{I()},500),alert(`\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 ${e} \u0643\u0645\u062f\u064a\u0631 \u0628\u0646\u062c\u0627\u062d!`)}else alert("\u064a\u0631\u062c\u0649 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 \u0623\u0648\u0644\u0627\u064b")},children:"\u0625\u0635\u0644\u0627\u062d \u0627\u0644\u0648\u0635\u0648\u0644"}),(0,l.jsx)("button",{className:"back-btn",onClick:()=>window.history.back(),children:"Go Back"})]})]})})})}}}]);
//# sourceMappingURL=846.4fed9224.chunk.js.map