"use strict";(self.webpackChunke_commer_react=self.webpackChunke_commer_react||[]).push([[896],{896:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var r=a(379),o=a(483),l=a(376),i=a(149),n=a(723);function d(e){let{onLogin:s,darkMode:a=!1}=e;const[d,t]=(0,o.useState)(!0),[c,m]=(0,o.useState)({email:"",password:"",confirmPassword:""}),[u,h]=(0,o.useState)(""),[p,g]=(0,o.useState)(""),[f,w]=(0,o.useState)(!1),x=(0,l.Zp)(),j=e=>{m((0,r.A)((0,r.A)({},c),{},{[e.target.name]:e.target.value})),h(""),g("")};return(0,n.jsx)("div",{className:"login-container ".concat(a?"dark-mode":""),children:(0,n.jsxs)("div",{className:"login-card",children:[(0,n.jsxs)("div",{className:"login-header",children:[(0,n.jsx)("h2",{children:d?"Welcome Back":"Create Account"}),(0,n.jsx)("p",{children:d?"Sign in to your account":"Join us today"})]}),(0,n.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),w(!0),h(""),g("");try{if(!c.email||!c.password)return void h("Please fill in all fields");if(!d&&c.password!==c.confirmPassword)return void h("Passwords do not match");if(!d&&c.password.length<6)return void h("Password must be at least 6 characters");if(d){const e=i.A.validateLogin(c.email,c.password);e?(g("Login successful!"),localStorage.setItem("currentUserEmail",e.email),setTimeout(()=>{s(e),x("/")},1e3)):h("Invalid email or password")}else try{const e=i.A.registerUser({email:c.email,password:c.password,name:c.email.split("@")[0]});g("Account created successfully!"),localStorage.setItem("currentUserEmail",e.email),setTimeout(()=>{s(e),x("/")},1e3)}catch(u){h(u.message)}}catch(u){h("An unexpected error occurred"),console.error("Login error:",u)}finally{w(!1)}},className:"login-form",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"email",children:"Email"}),(0,n.jsx)("input",{type:"email",id:"email",name:"email",value:c.email,onChange:j,placeholder:"Enter your email",required:!0,disabled:f})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"password",children:"Password"}),(0,n.jsx)("input",{type:"password",id:"password",name:"password",value:c.password,onChange:j,placeholder:"Enter your password",required:!0,disabled:f})]}),!d&&(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,n.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:c.confirmPassword,onChange:j,placeholder:"Confirm your password",required:!0,disabled:f})]}),u&&(0,n.jsx)("div",{className:"error-message",children:u}),p&&(0,n.jsx)("div",{className:"success-message",children:p}),(0,n.jsx)("button",{type:"submit",className:"submit-btn",disabled:f,children:f?"Loading...":d?"Sign In":"Create Account"})]}),(0,n.jsx)("div",{className:"login-footer",children:(0,n.jsxs)("p",{children:[d?"Don't have an account? ":"Already have an account? ",(0,n.jsx)("button",{className:"toggle-btn",onClick:()=>{t(!d),h(""),g(""),m({email:"",password:"",confirmPassword:""})},disabled:f,children:d?"Create Account":"Sign In"})]})}),(0,n.jsxs)("div",{className:"debug-info",style:{marginTop:"20px",fontSize:"12px",color:"#666"},children:[(0,n.jsxs)("p",{children:["Registered Users: ",i.A.getUsers().length]}),(0,n.jsxs)("p",{children:["Saved Orders: ",i.A.getOrders().length]})]})]})})}}}]);
//# sourceMappingURL=896.110893e7.chunk.js.map