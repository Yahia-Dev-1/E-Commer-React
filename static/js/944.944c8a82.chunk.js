"use strict";(self.webpackChunke_commer_react=self.webpackChunke_commer_react||[]).push([[944],{944:(e,s,a)=>{a.r(s),a.d(s,{default:()=>n});var r=a(43),o=a(216),l=a(453),i=a(579);function n(e){let{onLogin:s,darkMode:a=!1}=e;const[n,d]=(0,r.useState)(!0),[t,c]=(0,r.useState)({email:"",password:"",confirmPassword:""}),[m,u]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[g,f]=(0,r.useState)(!1),w=(0,o.Zp)(),x=e=>{c({...t,[e.target.name]:e.target.value}),u(""),p("")};return(0,i.jsx)("div",{className:"login-container "+(a?"dark-mode":""),children:(0,i.jsxs)("div",{className:"login-card",children:[(0,i.jsxs)("div",{className:"login-header",children:[(0,i.jsx)("h2",{children:n?"Welcome Back":"Create Account"}),(0,i.jsx)("p",{children:n?"Sign in to your account":"Join us today"})]}),(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),f(!0),u(""),p("");try{if(!t.email||!t.password)return void u("Please fill in all fields");if(!n&&t.password!==t.confirmPassword)return void u("Passwords do not match");if(!n&&t.password.length<6)return void u("Password must be at least 6 characters");if(n){const e=l.A.validateLogin(t.email,t.password);e?(p("Login successful!"),localStorage.setItem("currentUserEmail",e.email),setTimeout(()=>{s(e),w("/")},1e3)):u("Invalid email or password")}else try{const e=l.A.registerUser({email:t.email,password:t.password,name:t.email.split("@")[0]});p("Account created successfully!"),localStorage.setItem("currentUserEmail",e.email),setTimeout(()=>{s(e),w("/")},1e3)}catch(m){u(m.message)}}catch(m){u("An unexpected error occurred"),console.error("Login error:",m)}finally{f(!1)}},className:"login-form",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"email",children:"Email"}),(0,i.jsx)("input",{type:"email",id:"email",name:"email",value:t.email,onChange:x,placeholder:"Enter your email",required:!0,disabled:g})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"password",children:"Password"}),(0,i.jsx)("input",{type:"password",id:"password",name:"password",value:t.password,onChange:x,placeholder:"Enter your password",required:!0,disabled:g})]}),!n&&(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,i.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:t.confirmPassword,onChange:x,placeholder:"Confirm your password",required:!0,disabled:g})]}),m&&(0,i.jsx)("div",{className:"error-message",children:m}),h&&(0,i.jsx)("div",{className:"success-message",children:h}),(0,i.jsx)("button",{type:"submit",className:"submit-btn",disabled:g,children:g?"Loading...":n?"Sign In":"Create Account"})]}),(0,i.jsx)("div",{className:"login-footer",children:(0,i.jsxs)("p",{children:[n?"Don't have an account? ":"Already have an account? ",(0,i.jsx)("button",{className:"toggle-btn",onClick:()=>{d(!n),u(""),p(""),c({email:"",password:"",confirmPassword:""})},disabled:g,children:n?"Create Account":"Sign In"})]})}),(0,i.jsxs)("div",{className:"debug-info",style:{marginTop:"20px",fontSize:"12px",color:"#666"},children:[(0,i.jsxs)("p",{children:["Registered Users: ",l.A.getUsers().length]}),(0,i.jsxs)("p",{children:["Saved Orders: ",l.A.getOrders().length]})]})]})})}}}]);
//# sourceMappingURL=944.944c8a82.chunk.js.map